{"version":3,"file":"index14.js","sources":["../utils/platform.ts"],"sourcesContent":["//@ts-ignore\nimport { config } from \"@ionic/core/dist/collection/global/config\";\nimport { readable } from \"svelte/store\";\n\nlet _win: Window;\nlet _doc: Document;\n\nexport type Platforms = keyof typeof PLATFORMS_MAP;\n\ninterface IsPlatformSignature {\n  (plt: Platforms): boolean;\n  (win: Window, plt: Platforms): boolean;\n}\n\nexport const getPlatforms = (win?: any) => setupPlatforms(win);\n\nexport const isPlatform: IsPlatformSignature = (\n  winOrPlatform: Window | Platforms | undefined,\n  platform?: Platforms,\n) => {\n  if (typeof winOrPlatform === \"string\") {\n    platform = winOrPlatform;\n    winOrPlatform = undefined;\n  }\n  return getPlatforms(winOrPlatform).includes(platform!);\n};\n\nexport const setupPlatforms = (win: any) => {\n  // = window\n\n  // to support SSR we need to wrap window and not initialise as default\n  if (typeof window !== \"undefined\") {\n    win = window;\n    _win = window;\n  }\n\n  // we need the document object later on as well - if possible\n  if (typeof document !== \"undefined\") {\n    _doc = document;\n  }\n\n  if (typeof win === \"undefined\") {\n    return [];\n  }\n  win.Ionic = win.Ionic || {};\n\n  let platforms: Platforms[] | undefined | null = win.Ionic.platforms;\n  if (platforms == null) {\n    platforms = win.Ionic.platforms = detectPlatforms(win);\n    platforms.forEach((p) =>\n      win.document.documentElement.classList.add(`plt-${p}`),\n    );\n  }\n  return platforms;\n};\n\nconst detectPlatforms = (win: Window) => {\n  const customPlatformMethods = config.get(\"platform\");\n  return (Object.keys(PLATFORMS_MAP) as Platforms[]).filter((p) => {\n    const customMethod = customPlatformMethods?.[p];\n    return typeof customMethod === \"function\"\n      ? customMethod(win)\n      : PLATFORMS_MAP[p](win);\n  });\n};\n\nconst isMobileWeb = (win: Window): boolean => isMobile(win) && !isHybrid(win);\n\nconst isIpad = (win: Window) => {\n  // iOS 12 and below\n  if (testUserAgent(win, /iPad/i)) {\n    return true;\n  }\n\n  // iOS 13+\n  if (testUserAgent(win, /Macintosh/i) && isMobile(win)) {\n    return true;\n  }\n\n  return false;\n};\n\nconst isIphone = (win: Window) => testUserAgent(win, /iPhone/i);\n\nconst isIOS = (win: Window) =>\n  testUserAgent(win, /iPhone|iPod/i) || isIpad(win);\n\nconst isAndroid = (win: Window) => testUserAgent(win, /android|sink/i);\n\nconst isAndroidTablet = (win: Window) => {\n  return isAndroid(win) && !testUserAgent(win, /mobile/i);\n};\n\nconst isPhablet = (win: Window) => {\n  const width = win.innerWidth;\n  const height = win.innerHeight;\n  const smallest = Math.min(width, height);\n  const largest = Math.max(width, height);\n\n  return smallest > 390 && smallest < 520 && largest > 620 && largest < 800;\n};\n\nconst isTablet = (win: Window) => {\n  const width = win.innerWidth;\n  const height = win.innerHeight;\n  const smallest = Math.min(width, height);\n  const largest = Math.max(width, height);\n\n  return (\n    isIpad(win) ||\n    isAndroidTablet(win) ||\n    (smallest > 460 && smallest < 820 && largest > 780 && largest < 1400)\n  );\n};\n\nconst isMobile = (win: Window) => matchMedia(win, \"(any-pointer:coarse)\");\n\nconst isDesktop = (win: Window) => !isMobile(win);\n\nconst isHybrid = (win: Window) => isCordova(win) || isCapacitorNative(win);\n\nconst isCordova = (win: any): boolean =>\n  !!(win[\"cordova\"] || win[\"phonegap\"] || win[\"PhoneGap\"]);\n\nconst isCapacitorNative = (win: any): boolean => {\n  const capacitor = win[\"Capacitor\"];\n  return !!capacitor?.isNative;\n};\n\nconst isElectron = (win: Window): boolean => testUserAgent(win, /electron/i);\n\nconst isPWA = (win: Window): boolean =>\n  !!(\n    win.matchMedia?.(\"(display-mode: standalone)\").matches ||\n    (win.navigator as any).standalone\n  );\n\nexport const testUserAgent = (win: Window, expr: RegExp) =>\n  expr.test(win.navigator.userAgent);\n\nconst matchMedia = (win: Window, query: string): boolean =>\n  win.matchMedia?.(query).matches;\n\nexport type PlatformConfig = Partial<typeof PLATFORMS_MAP>;\n\nconst PLATFORMS_MAP = {\n  ipad: isIpad,\n  iphone: isIphone,\n  ios: isIOS,\n  android: isAndroid,\n  phablet: isPhablet,\n  tablet: isTablet,\n  cordova: isCordova,\n  capacitor: isCapacitorNative,\n  electron: isElectron,\n  pwa: isPWA,\n  mobile: isMobile,\n  mobileweb: isMobileWeb,\n  desktop: isDesktop,\n  hybrid: isHybrid,\n};\n\n// SSR proof\nexport const networkStatus = readable(\n  typeof window !== \"undefined\"\n    ? (window.navigator.onLine ? \"on\" : \"off\") + \"line\"\n    : \"\",\n  (set) => {\n    const eventFunction = () => {\n      if (typeof window !== \"undefined\")\n        set((window.navigator.onLine ? \"on\" : \"off\") + \"line\");\n    };\n\n    if (typeof window !== \"undefined\") {\n      window.addEventListener(\"offline\", eventFunction);\n      window.addEventListener(\"online\", eventFunction);\n    }\n    return () => {\n      if (typeof window !== \"undefined\") {\n        window.removeEventListener(\"offline\", eventFunction);\n        window.removeEventListener(\"online\", eventFunction);\n      }\n    };\n  },\n);\n\n// taken from Angular's platform service\nconst readableEventFactory = (args: {\n  defaultvalue: any;\n  event: string;\n  eventAttr: string;\n  listenerComponent: Window | Document;\n}) => {\n  const { defaultvalue, event, eventAttr, listenerComponent } = args;\n  return readable(defaultvalue, (set) => {\n    const eventFunction = (event: any) => {\n      if (eventAttr) set(event[eventAttr]);\n      else set(event);\n    };\n    listenerComponent.addEventListener(event, eventFunction);\n    return () => {\n      listenerComponent.removeEventListener(event, eventFunction);\n    };\n  });\n};\n\n// SSR friendly\nexport let resize = readable(\"\", (set) => {\n  return () => {};\n});\nexport let keyboardDidShow = readable(\"\", (set) => {\n  return () => {};\n});\nexport let keyboardDidHide = readable(\"\", (set) => {\n  return () => {};\n});\nif (typeof window !== \"undefined\") {\n  resize = readableEventFactory({\n    defaultvalue: \"\",\n    event: \"resize\",\n    eventAttr: \"timeStamp\",\n    listenerComponent: window,\n  });\n  keyboardDidShow = readableEventFactory({\n    defaultvalue: \"\",\n    event: \"ionKeyboardDidShow\",\n    eventAttr: \"\",\n    listenerComponent: window,\n  });\n  keyboardDidHide = readableEventFactory({\n    defaultvalue: \"\",\n    event: \"ionKeyboardDidHide\",\n    eventAttr: \"\",\n    listenerComponent: window,\n  });\n}\n\nexport let resume = readable(\"\", (set) => {\n  return () => {};\n});\nexport let pause = readable(\"\", (set) => {\n  return () => {};\n});\nexport let backButton = readable(\"\", (set) => {\n  return () => {};\n});\nexport let keydown = readable(\"\", (set) => {\n  return () => {};\n});\nif (typeof document !== \"undefined\") {\n  resume = readableEventFactory({\n    defaultvalue: \"\",\n    event: \"resume\",\n    eventAttr: \"\",\n    listenerComponent: document,\n  });\n  pause = readableEventFactory({\n    defaultvalue: \"\",\n    event: \"pause\",\n    eventAttr: \"\",\n    listenerComponent: document,\n  });\n  backButton = readableEventFactory({\n    defaultvalue: \"\",\n    event: \"ionBackButton\",\n    eventAttr: \"\",\n    listenerComponent: document,\n  });\n  keydown = readableEventFactory({\n    defaultvalue: \"\",\n    event: \"keydown\",\n    eventAttr: \"key\",\n    listenerComponent: document,\n  });\n}\n\nexport const backButtonSubscribeWithPriority = (\n  handler: () => {},\n  priority: number = 10,\n) => {\n  if (typeof document !== \"undefined\")\n    document.addEventListener(\"ionBackButton\", (ev: any) => {\n      ev.detail.register(priority, () => {\n        handler();\n        console.log(\"Handler was called!\");\n      });\n    });\n};\n\nexport const height = (): number => {\n  if (_win) return _win.innerHeight;\n  return 0;\n};\n\nexport const width = (): number => {\n  if (_win) return _win.innerWidth;\n  return 0;\n};\n\nexport const url = (): string => {\n  if (_win) return _win.location.href;\n  return \"\";\n};\n\n// make this in a readable - problem is that iOS does not support https://developer.mozilla.org/en-US/docs/Web/API/ScreenOrientation\nexport const isPortrait = (): boolean => {\n  if (_win) return _win.matchMedia?.(\"(orientation: portrait)\").matches;\n  return false;\n};\n\n// make this in a derived\nexport const isLandscape = (): boolean => {\n  return !isPortrait();\n};\n\nexport const getQueryParam = (key: string): string | null => {\n  if (_win) return readQueryParam(_win.location.href, key);\n  return null;\n};\n\nexport const isRTL = (): boolean => {\n  if (_doc) return _doc.dir === \"rtl\";\n  else return false;\n};\n\n/* redundant addition */\nexport const is = (platformName: Platforms): boolean => {\n  if (_win) return isPlatform(_win, platformName);\n  return false;\n};\n\nconst readQueryParam = (url: string, key: string) => {\n  key = key.replace(/[[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n  const regex = new RegExp(\"[\\\\?&]\" + key + \"=([^&#]*)\");\n  const results = regex.exec(url);\n  return results ? decodeURIComponent(results[1].replace(/\\+/g, \" \")) : null;\n};\n\n// todo - implement toggle for dark mode https://ionicframework.com/docs/theming/dark-mode\nimport { writable } from \"svelte/store\";\nexport const prefersDark = writable(\n  typeof window !== \"undefined\"\n    ? window.matchMedia &&\n        window.matchMedia(\"(prefers-color-scheme: dark)\").matches\n    : \"\",\n);\nif (typeof window !== \"undefined\")\n  window\n    .matchMedia(\"(prefers-color-scheme: dark)\")\n    .addEventListener(\"change\", (e) => {\n      prefersDark.set(e.matches ? true : false);\n    });\nexport const toggleDarkTheme = (shouldAdd: any) => {\n  if (_doc) document.body.classList.toggle(\"dark\", shouldAdd);\n};\n"],"names":["_win","_doc","getPlatforms","win","setupPlatforms","isPlatform","winOrPlatform","platform","platforms","detectPlatforms","p","customPlatformMethods","config","PLATFORMS_MAP","customMethod","isMobileWeb","isMobile","isHybrid","isIpad","testUserAgent","isIphone","isIOS","isAndroid","isAndroidTablet","isPhablet","width","height","smallest","largest","isTablet","matchMedia","isDesktop","isCordova","isCapacitorNative","capacitor","isElectron","isPWA","_a","expr","query","networkStatus","readable","set","eventFunction","readableEventFactory","args","defaultvalue","event","eventAttr","listenerComponent","resize","keyboardDidShow","keyboardDidHide","resume","pause","backButton","keydown","backButtonSubscribeWithPriority","handler","priority","ev","url","isPortrait","isLandscape","getQueryParam","key","readQueryParam","isRTL","is","platformName","results","prefersDark","writable","toggleDarkTheme","shouldAdd"],"mappings":"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"}